(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{29:function(r,t,e){},33:function(r,t,e){"use strict";e.r(t);var o,a,n=e(0),u=e.n(n),i=e(23),c=e.n(i),l=(e(29),e(10)),f=e(16),h=e(15),s=e(5),v=e(2),b=e(13);!function(r){r[r.King=0]="King",r[r.Queen=1]="Queen",r[r.Rook=2]="Rook",r[r.Bishop=3]="Bishop",r[r.Knight=4]="Knight",r[r.Pawn=5]="Pawn"}(o||(o={})),function(r){r[r.White=0]="White",r[r.Black=1]="Black"}(a||(a={}));for(var d=e(6),p=e(24),S=[8,-8,-1,1,7,-7,9,-9],g=[[]],q=[],k=[[]],m=[[]],w=[[]],O=[[]],j=function(r){var t=Math.floor(r/8),e=r-8*t,o=7-t,a=t,n=e,u=7-e;g[r]=[],g[r][0]=o,g[r][1]=a,g[r][2]=n,g[r][3]=u,g[r][4]=Math.min(o,n),g[r][5]=Math.min(a,u),g[r][6]=Math.min(o,u),g[r][7]=Math.min(a,n);for(var i=0;i<4;i++)for(var c=S[i],l=0;l<g[r][i];l++){var f=r+c*(l+1);q.push({fromSquare:r,toSquare:f})}var h=[];S.forEach((function(o){var a=r+o;if(a>=0&&a<64){var n=Math.floor(a/8),u=a-8*n;1==Math.max(Math.abs(e-u),Math.abs(t-n))&&h.push(a)}})),k[r]=h;var s=[];[15,17,-17,-15,10,-6,6,-10].forEach((function(o){var a=r+o;if(a>=0&&a<64){var n=Math.floor(a/8),u=a-8*n;2==Math.max(Math.abs(e-u),Math.abs(t-n))&&s.push(a)}})),m[r]=s;var v=[],b=[];e>0&&(t<7&&v.push(r+7),t>0&&b.push(r-9)),e<7&&(t<7&&v.push(r+9),t>0&&b.push(r-7)),w[r]=v,O[r]=b},M=0;M<64;M++)j(M);var W,y,B,P,K=function(r,t,e){var n=[],u=r.map((function(r,t){return[r,t]}));u=u.filter((function(r){var e=Object(s.a)(r,2),o=e[0];e[1];return(null===o||void 0===o?void 0:o.color)==t}));var i=[8,-8,-1,1,7,-7,9,-9];return u.forEach((function(u){var c=Object(s.a)(u,2),l=c[0],f=c[1];switch(null===l||void 0===l?void 0:l.type){case o.Rook:for(var h=0;h<4;h++)for(var v=i[h],b=0;b<g[f][h];b++){var d,p,S=f+v*(b+1);if((null===(d=r[S])||void 0===d?void 0:d.color)==t)break;if(n.push({fromSquare:f,toSquare:S}),null!=r[S]&&(null===(p=r[S])||void 0===p?void 0:p.color)!=t)break}break;case o.Bishop:for(var q=4;q<8;q++)for(var j=i[q],M=0;M<g[f][q];M++){var W,y,B=f+j*(M+1);if((null===(W=r[B])||void 0===W?void 0:W.color)==t)break;if(n.push({fromSquare:f,toSquare:B}),null!=r[B]&&(null===(y=r[B])||void 0===y?void 0:y.color)!=t)break}break;case o.Queen:for(var P=0;P<8;P++)for(var K=i[P],E=0;E<g[f][P];E++){var I,_,L=f+K*(E+1);if((null===(I=r[L])||void 0===I?void 0:I.color)==t)break;if(n.push({fromSquare:f,toSquare:L}),null!=r[L]&&(null===(_=r[L])||void 0===_?void 0:_.color)!=t)break}break;case o.Knight:m[f].forEach((function(e){var o;(null===(o=r[e])||void 0===o?void 0:o.color)!=t&&n.push({fromSquare:f,toSquare:e})}));break;case o.King:k[f].forEach((function(e){var o;(null===(o=r[e])||void 0===o?void 0:o.color)!=t&&n.push({fromSquare:f,toSquare:e})}));var R=t==a.White?e.whiteShort:e.blackShort,N=t==a.White?e.whiteLong:e.blackLong;R&&null==r[f+1]&&null==r[f+2]&&n.push({fromSquare:f,toSquare:f+2}),N&&null==r[f-1]&&null==r[f-2]&&n.push({fromSquare:f,toSquare:f-2});break;case o.Pawn:var D=l.color==a.White?f+8:f-8;D>=0&&D<64&&null==r[D]&&n.push({fromSquare:f,toSquare:D});var T=l.color==a.White?f+16:f-16,x=l.color==a.White?1:6;Math.floor(f/8)==x&&null==r[D]&&null==r[T]&&n.push({fromSquare:f,toSquare:T});(l.color==a.White?w[f]:O[f]).forEach((function(e){var o;(null===(o=r[e])||void 0===o?void 0:o.color)!=t&&null!=r[e]&&n.push({fromSquare:f,toSquare:e})}))}})),n},E=function(r,t,e){var n=[];return K(r,t,e).forEach((function(u){var i=I(r,u),c=K(i,t==a.White?a.Black:a.White,e),l=i.indexOf(i.find((function(r){return(null===r||void 0===r?void 0:r.type)==o.King&&(null===r||void 0===r?void 0:r.color)==t}))||null);c.some((function(r){return r.toSquare==l}))||n.push(u)})),n},I=function(r,t){var e,a=Object(h.a)(r),n=a[t.fromSquare];if(a[t.fromSquare]=null,a[t.toSquare]=n,(null===(e=r[t.fromSquare])||void 0===e?void 0:e.type)==o.King){var u=_(t);if(u){var i=a[u.fromSquare];a[u.fromSquare]=null,a[u.toSquare]=i}}return a},_=function(r){return r.toSquare==r.fromSquare+2?{fromSquare:r.toSquare+1,toSquare:r.toSquare-1}:r.toSquare==r.fromSquare-2?{fromSquare:r.toSquare-2,toSquare:r.toSquare+1}:void 0},L=function(r,t){var e,n=0,u=(e={},Object(d.a)(e,o.Pawn,1),Object(d.a)(e,o.Bishop,3),Object(d.a)(e,o.Knight,3),Object(d.a)(e,o.Rook,5),Object(d.a)(e,o.Queen,9),Object(d.a)(e,o.King,900),e);return r.forEach((function(r){r&&(n+=u[r.type]*(r.color==a.White?1:-1))})),n*(t==a.White?1:-1)},R=b.a.div(W||(W=Object(l.a)(["\n\twidth: 500px;\n\theight: 500px;\n\tbackground-color: green;\n\tdisplay: grid;\n\tgrid-template-columns: repeat(8, 1fr);\n\tgrid-template-rows: repeat(8, 1fr);\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n"]))),N=b.a.div(y||(y=Object(l.a)(["\n\tposition: relative;\n\tdisplay: grid;\n\tplace-items: center;\n\tgrid-row: ",";\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: ",';\n\tcolor: black;\n\n\t::after {\n\t\tcontent: "";\n\t\tposition: absolute;\n\t\twidth: 20%;\n\t\theight: 20%;\n\t\ttransform: rotate(45deg);\n\t\tbackground-color: #5ca099;\n\t\topacity: ',";\n\t\tpointer-events: none;\n\t}\n\n\tdiv {\n\t\twidth: 80%;\n\t\theight: 80%;\n\t\tbackground-image: ",";\n\t\tbackground-size: cover;\n\t}\n"])),(function(r){return r.row}),(function(r){return r.isLight?"#f6edcd":"#f0cf8e"}),(function(r){return r.isMarked?1:0}),(function(r){return'url("images/'.concat(r.image,'.svg")')})),D=function(r){if(null==r)return"";switch(r.type){case o.King:return r.color==a.Black?"king_b":"king_w";case o.Queen:return r.color==a.Black?"queen_b":"queen_w";case o.Rook:return r.color==a.Black?"rook_b":"rook_w";case o.Bishop:return r.color==a.Black?"bishop_b":"bishop_w";case o.Knight:return r.color==a.Black?"knight_b":"knight_w";case o.Pawn:return r.color==a.Black?"pawn_b":"pawn_w";default:return""}},T=function(r){var t=r.boardState,e=r.currentPlayer,o=r.castlingRights,a=r.onMakeMove,u=Object(n.useState)([]),i=Object(s.a)(u,2),c=i[0],l=i[1],f=t.map((function(r,t){return Object(v.a)(N,{key:t,isLight:!(Math.floor(t/8)%2!=0?t%2!=0:t%2==0),row:8-Math.floor(t/8),image:D(r),onDragOver:function(r){return h(r)},onDrop:function(r){return p(r,t)},isMarked:c.includes(t)},r?r.color==e?Object(v.a)("div",{draggable:!0,onDragStart:function(e){return b(e,t,D(r))},onDragEnd:function(r){return d(r)}}):Object(v.a)("div",null):null)})),h=function(r){r.preventDefault()},b=function(r,a,n){r.currentTarget.style.opacity="0",r.dataTransfer.setData("tilePosition",a.toString());var u=new Image;u.src="images/".concat(n,".svg"),r.dataTransfer.setDragImage(u,45,45);var i=E(t,e,o);l(i.filter((function(r){var t=r.fromSquare;r.toSquare;return t===a})).map((function(r){r.fromSquare;return r.toSquare})))},d=function(r){r.currentTarget.style.opacity="1",l([])},p=function(r,t){if(c.includes(t)){var e={fromSquare:parseInt(r.dataTransfer.getData("tilePosition")),toSquare:t};a(e),l([])}};return Object(v.a)(R,null,f)},x=function(r,t){var e=0,o=function r(o,n,u){if(e++,0==n)return L(o,u);var i=Number.NEGATIVE_INFINITY;return K(o,u,t).forEach((function(t){var e=-r(I(o,t),n-1,u==a.White?a.Black:a.White);e>i&&(i=e)})),i},n=[],u=Number.POSITIVE_INFINITY,i=K(r,a.Black,t);if(0!=i.length){var c;c=Date.now(),i.forEach((function(t){var e=o(I(r,t),3,a.White);e<=u&&(u=e,n.push({move:t,score:e}))})),n=n.filter((function(r){r.move;return r.score==u}));var l=Date.now()-c;if(console.log("Checking "+e+" moves"),console.log("That took "+l+"ms"),0!=n.length)return n[Math.floor(Math.random()*n.length)].move}else console.log("Game over")};P=function(r){var t,e=[],n=function(r){switch(r.toLowerCase()){case"p":return o.Pawn;case"r":return o.Rook;case"n":return o.Knight;case"b":return o.Bishop;case"q":return o.Queen;case"k":default:return o.King}},u=r.split(" ")[0],i=0,c=7,l=Object(p.a)(u);try{for(l.s();!(t=l.n()).done;){var f=t.value;if("/"==f)i=0,c--;else if(isNaN(parseInt(f))){var h={type:n(f),color:f==f.toUpperCase()?a.White:a.Black};e[i+8*c]=h,i++}else{for(var s=0;s<parseInt(f);s++)e[i+s+8*c]=null;i+=parseInt(f)}}}catch(v){l.e(v)}finally{l.f()}return e}("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1");var Q=b.a.div(B||(B=Object(l.a)(["\n\tpadding: 50px;\n"]))),C=function(){var r=Object(n.useState)(P),t=Object(s.a)(r,2),e=t[0],u=t[1],i=Object(n.useState)(a.White),c=Object(s.a)(i,2),l=c[0],b=c[1],d=Object(n.useState)({whiteShort:!0,whiteLong:!0,blackShort:!0,blackLong:!0}),p=Object(s.a)(d,2),S=p[0],g=p[1];Object(n.useEffect)((function(){l==a.Black&&k()}),[l]);var q=function(r){var t,n,i,c=Object(h.a)(e),s=c[r.fromSquare];if(c[r.fromSquare]=null,c[r.toSquare]=s,(null===(t=e[r.fromSquare])||void 0===t?void 0:t.type)==o.King){var v=_(r);if(v){var d=c[v.fromSquare];c[v.fromSquare]=null,c[v.toSquare]=d}var p=Object(f.a)({},S);l==a.White?(p.whiteShort=!1,p.whiteLong=!1):(p.blackShort=!1,p.blackLong=!1),g(p)}if((null===(n=e[r.fromSquare])||void 0===n?void 0:n.type)==o.Rook){var q=Object(f.a)({},S);l==a.White?0==r.fromSquare?q.whiteLong=!1:7==r.fromSquare&&(q.whiteShort=!1):56==r.fromSquare?q.blackLong=!1:63==r.fromSquare&&(q.blackShort=!1),g(q)}if((null===(i=e[r.toSquare])||void 0===i?void 0:i.type)==o.Rook){var k,m=Object(f.a)({},S);(null===(k=e[r.toSquare])||void 0===k?void 0:k.color)==a.White?0==r.toSquare?m.whiteLong=!1:7==r.toSquare&&(m.whiteShort=!1):56==r.toSquare?m.blackLong=!1:63==r.toSquare&&(m.blackShort=!1),g(m)}l==a.White?b(a.Black):b(a.White),u(c)},k=function(){var r=x(e,S);r&&q(r)};return Object(v.a)("main",null,Object(v.a)(T,{boardState:e,currentPlayer:l,castlingRights:S,onMakeMove:q}),Object(v.a)(Q,null,Object(v.a)("p",null,"Current player: ",l==a.White?"white":"black"),Object(v.a)("p",null,"Material advantage:"," ",L(e,a.White))))},F=e(21);c.a.render(Object(F.jsx)(u.a.StrictMode,{children:Object(F.jsx)(C,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.0035f8ab.chunk.js.map